{% load static %}
<!doctype html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Order List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css"/>
    <style>
        body {
            background-color: #f9fafb; /* Light background for better contrast */
        }

        .table-container {
            background: white; /* White background for table */
            border-radius: 0.5rem; /* Rounded corners */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        }

        .avatar img {
            transition: transform 0.3s; /* Smooth image transition effect */
        }

        .avatar img:hover {
            transform: scale(1.05); /* Scale effect on hover */
        }

        .btn {
            margin-top: 1rem; /* Space above the button */
        }
    </style>
</head>
<body>
<div id="button_view" class="mx-a flex flex-row justify-center content-center  my-5">
    <button class="btn btn-outline mx-3 " onclick="orderView()">List Order </button>
    <button class="btn btn-outline mx-3 btn-primary">Comment </button>
    <button class="btn btn-outline mx-3 btn-secondary"><a href="">Product</a></button>
    <button class="btn btn-outline mx-3 btn-accent"><a href="">Accent</a></button>
</div>

<div class="max-w-[80vw] mx-auto" id="orderView mb-5">
    <div class="overflow-x-auto">
        <table class="table w-full table-auto table-container">
            <thead class="bg-gray-200">
            <tr>
                <th class="w-10">
                    <label>
                        <input type="checkbox" class="checkbox"/>
                    </label>
                </th>
                <th class="text-left">Name</th>
                <th class="text-left">Detail</th>
                <th class="text-left">Quantity</th>
                <th class="w-10"></th>
            </tr>
            </thead>
            <tbody id="tbody_items">
            <!-- Rows will be populated here dynamically -->
            </tbody>
            <tfoot>
            <tr>
                <th></th>
                <th>Name</th>
                <th>Detail</th>
                <th>Quantity</th>
                <th></th>
            </tr>
            </tfoot>
        </table>
    </div>
</div>
<div id="coment" class="!hidden">

</div>
<script src="{% static 'js/order/ordrItemsStaff.js' %}"></script>
<script>
    let flags = 0
    document.addEventListener('DOMContentLoaded', () => {
        orderView()

    });

    function orderAccept(orderid) {
        let data = new FormData();
        data.append('orderId', orderid);

        fetch(`http://localhost:8001/order/api/1`, {
            method: 'POST',
            body: data,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'X-CSRFToken': '{{ csrf_token }}'
            },
        })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(errorData => {
                        alert('Error: ' + errorData.message);
                        throw new Error('Network response was not ok');
                    });
                }
                return response.json();
            })
            .then(data => {
                alert('Order accepted successfully!');

            })
            .catch(error => {
                console.error('There has been a problem with your fetch operation:', error);
            }).finally(() => {
            orderView()
        })

    }

    setInterval(orderView, 5000);
</script>
</body>
</html>